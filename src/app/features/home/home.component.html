<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700;800&family=Fredoka:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

<div class="toast-container">
  <div *ngFor="let toast of toasts; trackBy: trackByToastId"
       class="toast toast-{{toast.type}}">
    <div class="toast-content">
      <span class="toast-icon">
        {{ toast.type === 'success' ? 'โ' : toast.type === 'error' ? 'โ' : 'โน' }}
      </span>
      <span class="toast-message">{{toast.message}}</span>
    </div>
    <button class="toast-close" (click)="removeToast(toast.id)">ร</button>
  </div>
</div>

<section class="hero-section" dir="rtl" lang="ar">
  <div class="hero-slider">
    <div class="hero-slide" style="background-image: url('/assets/images/home/heroimg2.jpg');"></div>
    <div class="hero-slide active" style="background-image: url('/assets/images/home/heroimg.jpg');"></div>
    <div class="hero-slide" style="background-image: url('/assets/images/home/heroimg3.jpg');"></div>
    <div class="water-overlay"></div>
    <div class="floating-shapes">
      <div class="shape shape-1">โญ</div>
      <div class="shape shape-2">๐</div>
      <div class="shape shape-3">โ๏ธ</div>
      <div class="shape shape-4">๐</div>
      <div class="shape shape-5">๐ฆ</div>
      <div class="shape shape-6">๐</div>
    </div>
  </div>
  <div class="hero-content">
    <div class="hero-icon">๐</div>
    <h1 class="hero-title">ูุฑุญุจูุง ุจู ูู ุนุงูู ุงูุฎูุงู ุงูุณุญุฑู</h1>
    <p class="hero-subtitle">ุงูุชุดู ุนุงูููุง ูููุฆูุง ุจุงููุบุงูุฑุงุช ูุงููุตุต ุงูุฑุงุฆุนุฉ</p>
    <a routerLink="/explore" class="hero-cta">
      <span class="cta-icon">๐</span>
      ุงุณุชูุดู ุงูุขู
      <span class="cta-sparkle">โจ</span>
    </a>
  </div>
</section>

<section class="our-sections" dir="rtl" lang="ar">
  <div class="container">
    <div class="section-header">
      <h1 class="section-title">
        <span class="title-decoration">๐ช</span>
        ุฃูุณุงููุง ุงููููุฒุฉ
        <span class="title-decoration">๐ช</span>
      </h1>
      <p class="section-description">ุงุฎุชุฑ ุงููุณู ุงูููุถู ูุฏูู ูุงุจุฏุฃ ุฑุญูุฉ ุงูุชุนูู ูุงููุฑุญ</p>
    </div>
    <div class="sections-grid">
      <div class="section-card all-products-card">
        <div class="card-badge">๐ ุงูุฃูุซุฑ ุดุนุจูุฉ</div>
        <div class="card-image" style="background-image: url('/assets/images/home/Add a subheading.png');"></div>
        <div class="card-content">
          <div class="card-icon">๐๏ธ</div>
          <h2 class="card-title">ุฌููุน ุงูููุชุฌุงุช</h2>
          <p class="card-description">ุงูุชุดู ูุฌููุนุชูุง ุงููุงููุฉ ูู ุงููุชุจ ูุงููุตุต ุงููุซูุฑุฉ</p>
          <a routerLink="/products" class="card-button">
            <span class="button-text">ุงุณุชูุดู ุงูููุชุฌุงุช</span>
            <span class="button-arrow">โ</span>
          </a>
        </div>
      </div>
      <div class="section-card stories-card">
        <div class="card-badge">๐ ุฌุฏูุฏ</div>
        <div class="card-image" style="background-image: url('/assets/images/home/Add a subheading (1).png');"></div>
        <div class="card-content">
          <div class="card-icon">๐</div>
          <h2 class="card-title">ูุตุต ุงูุฃุทูุงู</h2>
          <p class="card-description">ูุตุต ูููุฆุฉ ุจุงููุบุงูุฑุงุช ูุงูุฏุฑูุณ ุงููููุฉ</p>
          <a routerLink="/stories" class="card-button">
            <span class="button-text">ุงุณุชูุดู ุงููุตุต</span>
            <span class="button-arrow">โ</span>
          </a>
        </div>
      </div>
      <div class="section-card books-card">
        <div class="card-badge">๐ ูููุฒ</div>
        <div class="card-image" style="background-image: url('/assets/images/home/Add a subheading (2).png');"></div>
        <div class="card-content">
          <div class="card-icon">๐จ</div>
          <h2 class="card-title">ูุชุจ ุงูุฃุทูุงู</h2>
          <p class="card-description">ูุชุจ ุชุนููููุฉ ูุชุฑููููุฉ ุชููู ุฎูุงู ุทููู</p>
          <a routerLink="/books" class="card-button">
            <span class="button-text">ุชุตูุญ ุงููุชุจ</span>
            <span class="button-arrow">โ</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="achievements-section" dir="rtl" lang="ar">
  <div class="floating-elements">
    <div class="floating-element element-1">๐ฏ</div>
    <div class="floating-element element-2">๐</div>
    <div class="floating-element element-3">๐</div>
    <div class="floating-element element-4">๐</div>
    <div class="floating-element element-5">๐ซ</div>
  </div>
  <div class="container">
    <div class="section-header">
      <h1 class="section-title achievement-title">
        <span class="title-icon">๐</span>
        ุฅูุฌุงุฒุงุชูุง ุงูุฑุงุฆุนุฉ
      </h1>
      <h2 class="section-subtitle">ุฃุฑูุงู ุชุญูู ูุตุฉ ูุฌุงุญูุง ูุนูู</h2>
    </div>
    <div class="achievements-grid">
      <div class="achievement-card" data-aos="fade-up" data-aos-delay="100">
        <div class="achievement-icon">๐</div>
        <h3 class="achievement-number" id="years-experience">0+</h3>
        <p class="achievement-label">ุณูุฉ ุฎุจุฑุฉ</p>
        <div class="achievement-decor"></div>
        <div class="card-sparkles">
          <span class="sparkle">โจ</span>
          <span class="sparkle">โจ</span>
          <span class="sparkle">โจ</span>
        </div>
      </div>
      <div class="achievement-card" data-aos="fade-up" data-aos-delay="200">
        <div class="achievement-icon">๐</div>
        <h3 class="achievement-number" id="books">0+</h3>
        <p class="achievement-label">ูุชุงุจ</p>
        <div class="achievement-decor"></div>
        <div class="card-sparkles">
          <span class="sparkle">โจ</span>
          <span class="sparkle">โจ</span>
          <span class="sparkle">โจ</span>
        </div>
      </div>
      <div class="achievement-card" data-aos="fade-up" data-aos-delay="300">
        <div class="achievement-icon">๐</div>
        <h3 class="achievement-number" id="stories">0+</h3>
        <p class="achievement-label">ูุตุต</p>
        <div class="achievement-decor"></div>
        <div class="card-sparkles">
          <span class="sparkle">โจ</span>
          <span class="sparkle">โจ</span>
          <span class="sparkle">โจ</span>
        </div>
      </div>
      <div class="achievement-card" data-aos="fade-up" data-aos-delay="400">
        <div class="achievement-icon">๐</div>
        <h3 class="achievement-number" id="awards">0+</h3>
        <p class="achievement-label">ุฌูุงุฆุฒ</p>
        <div class="achievement-decor"></div>
        <div class="card-sparkles">
          <span class="sparkle">โจ</span>
          <span class="sparkle">โจ</span>
          <span class="sparkle">โจ</span>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="latest-books-section" dir="rtl" lang="ar">
  <div class="container">
    <div class="section-header">
      <h1 class="section-title">
        <span class="title-decoration">๐</span>
        ุฃุญุฏุซ ุงููุชุจ ุงููุซูุฑุฉ
        <span class="title-decoration">๐</span>
      </h1>
      <p class="section-description">ุงูุชุดู ุฃุฌูู ุงููุชุจ ุงูุฌุฏูุฏุฉ ุงูุชู ุณุชุฃุฎุฐู ูู ุฑุญูุฉ ูุดููุฉ</p>
    </div>
    <div class="books-slider-container">
      <div class="swiper books-slider">
        <div class="swiper-wrapper">
          <div *ngFor="let book of latestBooks; trackBy: trackByBookId" class="swiper-slide book-card">
            <div class="book-rating">
              <span class="star">โญ</span>
              <span class="star">โญ</span>
              <span class="star">โญ</span>
              <span class="star">โญ</span>
              <span class="star">โญ</span>
            </div>
            <div class="book-card-slideshow">
              <div *ngFor="let img of book.imgs; let i = index"
                   class="book-slide"
                   [class.active]="activeSlides[book._id] === i"
                   [style.background-image]="'url(' + getImageUrl(img) + ')'"></div>
            </div>
            <div class="book-content">
              <div class="book-category-badge">{{ getCategoryEmoji(book.category) }} {{ book.category }}</div>
              <h2 class="book-title">{{ book.name }}</h2>
              <p class="book-description">{{ book.description | slice:0:80 }}{{ book.description.length > 80 ? '...' : '' }}</p>
              <div class="book-price-container">
                <span class="book-price">{{ calculateBookFinalPrice(book) | number:'1.2-2' }} ุฌ.ู</span>
                <span class="price-badge" *ngIf="hasDiscount(book)">ุฎุตู {{ book.offer }}%</span>
                <span class="stock-badge" [class.out-of-stock]="book.stockStatus === 'outOfStock'">
                  {{ book.stockStatus === 'inStock' ? 'ูุชููุฑ' : 'ุบูุฑ ูุชููุฑ' }}
                </span>
              </div>
              <div class="book-actions">
                <button class="action-button cart-button"
                        aria-label="ุฃุถู ุฅูู ุงูุณูุฉ"
                        (click)="addToCart(book)"
                        [disabled]="book.stockStatus === 'outOfStock'">
                  <i class="fas fa-cart-plus"></i>
                  <span class="button-tooltip">ุฃุถู ููุณูุฉ</span>
                </button>
                <button class="action-button favorite-button"
                        aria-label="ุฃุถู ุฅูู ุงูููุถูุฉ"
                        (click)="toggleFavorite(book)"
                        [class.active]="isBookFavorited(book)">
                  <i class="fas fa-heart"></i>
                  <span class="button-tooltip">ุงูููุถูุฉ</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <button class="slider-nav next" *ngIf="latestBooks.length > 1">
        <span class="nav-icon">โ๏ธ</span>
      </button>
      <button class="slider-nav prev" *ngIf="latestBooks.length > 1">
        <span class="nav-icon">โถ๏ธ</span>
      </button>
      <div class="swiper-pagination" *ngIf="latestBooks.length > 1"></div>
    </div>
    <div class="empty-state" *ngIf="latestBooks.length === 0">
      <div class="empty-icon">๐</div>
      <h3>ูุง ุชูุฌุฏ ูุชุจ</h3>
      <p>ูู ูุชู ุงูุนุซูุฑ ุนูู ูุชุจ ุฌุฏูุฏุฉ ุญุงููุงู. ุชุญูู ูุงุญูุงู!</p>
    </div>
  </div>
</section>

<section class="contact-section" dir="rtl" lang="ar">
  <div class="container">
    <div class="section-header">
      <h1 class="section-title">
        <span class="title-decoration">๐ง</span>
        ุชูุงุตููุง ูุนูุง
        <span class="title-decoration">๐ง</span>
      </h1>
      <p class="section-description">ูุณุนุฏูุง ุณูุงุน ุขุฑุงุฆูู ูุงุณุชูุณุงุฑุงุชูู! ุชูุงุตููุง ูุนูุง ุงูุขู</p>
    </div>
    <div class="contact-grid">
      <div class="contact-form-card" data-aos="fade-up" data-aos-delay="100">
        <h2 class="form-title">ุฃุฑุณู ุฑุณุงูุชู</h2>
        <form class="contact-form" [formGroup]="contactForm" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <label for="name">ุงูุงุณู</label>
            <input type="text" id="name" formControlName="name" placeholder="ุฃุฏุฎู ุงุณูู" required>
            <div *ngIf="contactForm.get('name')?.invalid && contactForm.get('name')?.touched" class="error-message">
              ุงูุงุณู ูุทููุจ
            </div>
          </div>
          <div class="form-group">
            <label for="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
            <input type="email" id="email" formControlName="email" placeholder="ุฃุฏุฎู ุจุฑูุฏู ุงูุฅููุชุฑููู" required>
            <div *ngIf="contactForm.get('email')?.invalid && contactForm.get('email')?.touched" class="error-message">
              ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุตุงูุญ
            </div>
          </div>
          <div class="form-group">
            <label for="message">ุฑุณุงูุชู</label>
            <textarea id="message" formControlName="message" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง" rows="5" required></textarea>
            <div *ngIf="contactForm.get('message')?.invalid && contactForm.get('message')?.touched" class="error-message">
              ุงูุฑุณุงูุฉ ูุทููุจุฉ
            </div>
          </div>
          <button type="submit" class="form-submit-button" [disabled]="contactForm.invalid">
            <span class="button-text">ุฅุฑุณุงู</span>
            <span class="button-icon">โ๏ธ</span>
          </button>
        </form>
      </div>
      <div class="contact-details-card" data-aos="fade-up" data-aos-delay="200">
        <h2 class="details-title">ูุนูููุงุช ุงูุชูุงุตู</h2>
        <div class="contact-info">
          <div class="info-item">
            <i class="fas fa-envelope"></i>
            <span>linahstore1&#64;gmail.com</span>
          </div>
          <div class="info-item">
            <i class="fas fa-phone"></i>
            <span>01115000562</span>
          </div>
          <div class="info-item">
            <i class="fas fa-map-marker-alt"></i>
            <span>123 ุดุงุฑุน ุงููุบุงูุฑุฉุ ุงููุงูุฑุฉุ ูุตุฑ</span>
          </div>
        </div>
        <div class="map-container">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3453.123456789!2d31.23571161520988!3d30.04441998187695!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzDCsDAyJzQwLjciTiAzMcKwMTQnMDguNiJF!5e0!3m2!1sar!2seg!4v1634567890123"
            width="100%"
            height="200"
            style="border:0;"
            allowfullscreen=""
            loading="lazy">
          </iframe>
        </div>
        <div class="social-icons">
          <a href="https://www.facebook.com/LinahBookStore/?locale=ar_AR" target="_blank" class="social-icon" aria-label="ููุณุจูู">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.instagram.com%2Flinahbookstore%3Ffbclid%3DIwZXh0bgNhZW0CMTAAYnJpZBExRkdNVmdtTW12YXJhV1FWeAEecQkj_YoEDJ8TbOnqn4tpX_aT53LTiRsM-ve8BODAkn7lXrsni3xmfFQeEYY_aem_xG4l8tzGTCr11kCA6cwEkQ&h=AT2itsHiSUpAMkKaEmq9sQo3GNQGKg8Ax0hIgO6wmOdu1j2SAUHkoU5Va_qLL7ClyZ0yeOfkqCJCa3Qm6MG5d4sRxwVvBVrk0TPx9vVvHKBFWEVpIIFqNRsTeqWCLfgccHlwpw" target="_blank" class="social-icon" aria-label="ุฅูุณุชุบุฑุงู">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="https://wa.me/+201115000562" target="_blank" class="social-icon" aria-label="ูุงุชุณุงุจ">
            <i class="fab fa-whatsapp"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
